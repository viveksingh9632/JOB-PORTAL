<%- include("./layout/header") %>

<div class="container">
  <h2 class="jobs-Id">Jobs</h2>
  <a href="/add_job" class="btn btn-primary">Add a new job</a>

  <br /><br />

  <div class="container mt-5">
    <% if (message) { %>
      <div class="alert alert-dismissible fade show alert-<%= message.type %>" role="alert">
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        <strong><%= message.message %></strong>
      </div>
    <% } %>
  </div>

  <table class="table table-striped sorting">
    <thead>
      <tr class="home">
        <th>Id</th>
        <th>Job Category</th>
        <th>Employer</th>
        <th>City</th>
        <th>Title</th>
        <th>Description</th>
        <th>Pay</th>
        <th>Created Date</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% jobs.forEach((job) => { %>
      <tr>
        <td><%= job.id %></td>
        <td>
          <% if (job.categorie_id) { %>
            <p><%= job.categorie_id.category %></p>
          <% } %>
        </td>
        <td>
          <% if (job.employer_id) { %>
            <p><%= job.employer_id.name %></p>
          <% } %>
        </td>
        <td>
          <% if (job.citie_id) { %>
            <p><%= job.citie_id.name %></p>
          <% } %>
        </td>
        <td><%= job.title %></td>
        <td><%= job.desc %></td>
        <td><%= job.pay %></td>
        <td><%= job.created_at %></td>
        <td><%= job.status %></td>
        <td>
          <a href="/edit-job/<%= job.id %>" aria-label="Edit Job" id="Edit Job" class="action-link">
            <i class="fas fa-edit fa-lg mx-1 text-success"></i>
          </a>
          <a href="/delete-job/<%= job.id %>" aria-label="Delete Job" id="Delete Job" class="action-link">
            <i class="fas fa-trash fa-lg mx-1 text-danger"></i>
          </a>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>
</div>

<%- include("./layout/footer") %>
